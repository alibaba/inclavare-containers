#!/usr/bin/make -f
BUILD_ROOT := $(CURDIR)/debian/rune
BUILD_DIR := /usr/bin
LICENSE := /usr/share/licenses/rune
PROTOBUF_VERSION := 1.3.5 

export GO111MODULE := on

%:
	dh $@

override_dh_auto_build:
	go get github.com/golang/protobuf/protoc-gen-go@v$(PROTOBUF_VERSION)
	make -C rune
override_dh_auto_install:
	install -d -p $(BUILD_ROOT)$(BUILD_DIR)
	install -p -m 755 $(CURDIR)/rune/rune $(BUILD_ROOT)$(BUILD_DIR)
	install -d -p $(BUILD_ROOT)$(LICENSE)
	install -p -m 644 $(CURDIR)/rune/LICENSE $(BUILD_ROOT)$(LICENSE)
